# ğŸ§¶ TurboWarp Extension Hot Reload Dev Server
> **Yearnstudio å®šåˆ¶ç‰ˆ** | ä¸“ä¸ºé«˜æ•ˆå¼€å‘éæ²™ç®± (Unsandboxed) æ‰©å±•æ‰“é€ 

[![Yearnstudio](https://img.shields.io/badge/Yearnstudio-Horizon-0FBD8C?style=flat-square)](https://yearn.studio)
[![TurboWarp](https://img.shields.io/badge/Platform-TurboWarp-ff4c4c?style=flat-square)](https://turbowarp.org)
[![Yarn](https://img.shields.io/badge/Package_Manager-Yarn-2C8EBB?style=flat-square)](https://yarnpkg.com)

è¿™æ˜¯ä¸€ä¸ªç”¨äº TurboWarp æ‰©å±•å¼€å‘çš„è„šæ‰‹æ¶å’Œå¼€å‘æœåŠ¡å™¨ã€‚å®ƒè§£å†³äº† TurboWarp å¼ºåˆ¶ URL åŠ è½½æ‰©å±•è¿›å…¥â€œæ²™ç®±æ¨¡å¼â€çš„é—®é¢˜ï¼Œå®ç°äº†**æœ¬åœ°å¼€å‘ã€éæ²™ç®±è¿è¡Œã€å®æ—¶çƒ­é‡è½½**çš„æµç•…ä½“éªŒã€‚

## âœ¨ ç‰¹æ€§

* **ğŸ”¥ å®æ—¶çƒ­é‡è½½ (Hot Reload)**: ä¿®æ”¹ `src` ç›®å½•ä¸‹çš„ä»£ç å¹¶ä¿å­˜ï¼ŒTurboWarp ä¸­çš„ç§¯æœ¨ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œæ— éœ€åˆ·æ–°é¡µé¢ã€‚
* **âš¡ éæ²™ç®±ç¯å¢ƒ (Unsandboxed)**: æ‰©å±•è¿è¡Œåœ¨ä¸»çº¿ç¨‹ï¼Œæ‹¥æœ‰å®Œæ•´çš„ `window` å’Œ DOM è®¿é—®æƒé™ã€‚
* **ğŸ“‹ è‡ªåŠ¨åŒ–æµç¨‹**: å¯åŠ¨æœåŠ¡è‡ªåŠ¨å°†åŠ è½½å™¨ä»£ç å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå¹¶æä¾›äº¤äº’å¼è¯¢é—®æ˜¯å¦æ‰“å¼€æµè§ˆå™¨ã€‚
* **ğŸ§¶ Yarn ä¼˜å…ˆ**: é’ˆå¯¹ Yarn åŒ…ç®¡ç†å™¨ä¼˜åŒ–çš„æç®€ä¾èµ–ç®¡ç†ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆå§‹åŒ–é¡¹ç›®
åœ¨ä½ çš„å¼€å‘æ–‡ä»¶å¤¹ä¸‹è¿è¡Œåˆå§‹åŒ–è„šæœ¬ï¼š

```bash
node init.js
```

æŒ‰ç…§æç¤ºè¾“å…¥ **æ‰©å±•ID** å’Œ **æ‰©å±•åç§°**ã€‚è„šæœ¬ä¼šè‡ªåŠ¨åˆ›å»ºç›®å½•ã€å®‰è£…ä¾èµ–ã€‚

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š

```bash
yarn start
```

### 3. åœ¨ TurboWarp ä¸­åŠ è½½
1. å¯åŠ¨åï¼Œç»ˆç«¯ä¼šæç¤º Loader ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚

2. åœ¨å¼¹å‡ºçš„è¯¢é—®ä¸­é€‰æ‹©æ˜¯å¦æ‰“å¼€ TurboWarp Editorã€‚

3. åœ¨ TurboWarp ä¸­ç‚¹å‡»å·¦ä¸‹è§’çš„æ‰©å±•å›¾æ ‡ã€‚

4. é€‰æ‹© **è‡ªå®šä¹‰æ‰©å±•**ã€‚

5. åˆ‡æ¢åˆ° **æ–‡æœ¬** é€‰é¡¹å¡ã€‚

6. ç²˜è´´ (Ctrl+V) ä»£ç å¹¶ç‚¹å‡» åŠ è½½ (Load)ã€‚

> âš ï¸ æ³¨æ„ï¼šè¯·åŠ¡å¿…åœ¨å¼¹å‡ºçš„å®‰å…¨è­¦å‘Šä¸­é€‰æ‹© "ä»¥éæ²™ç®±æ¨¡å¼è¿è¡Œ (Run unsandboxed)"ã€‚

ç°åœ¨ï¼Œä½ å¯ä»¥å¼€å§‹åœ¨ src/extension.js ä¸­ç¼–å†™ä»£ç äº†ï¼æ¯æ¬¡ä¿å­˜æ–‡ä»¶ï¼ŒTurboWarp éƒ½ä¼šè‡ªåŠ¨åŒæ­¥ã€‚

## ğŸ› ï¸ å‘½ä»¤è¯´æ˜
| å‘½ä»¤ |	è¯´æ˜ |
| --- | --- |
| yarn start |	å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (Port 3000)ï¼Œç›‘å¬æ–‡ä»¶å˜æ›´ï¼Œæ”¯æŒçƒ­é‡è½½ã€‚ |
| yarn build |	å°†æ‰©å±•æ‰“åŒ…å¯¼å‡ºåˆ° dist/ ç›®å½•ï¼Œç”Ÿæˆæœ€ç»ˆçš„å¯å‘å¸ƒæ–‡ä»¶ã€‚ |
| yarn clean |	æ¸…ç† dist/ ç›®å½•ã€‚ |

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ src/
â”‚   â””â”€â”€ extension.js       # ğŸ“ åœ¨è¿™é‡Œç¼–å†™ä½ çš„æ‰©å±•é€»è¾‘
â”œâ”€â”€ scripts/               # âš™ï¸ æ ¸å¿ƒè„šæœ¬ (ä¸€èˆ¬æ— éœ€ä¿®æ”¹)
â”‚   â”œâ”€â”€ server.js          #    å¼€å‘æœåŠ¡å™¨é€»è¾‘
â”‚   â”œâ”€â”€ loader.js          #    çƒ­é‡è½½ä»£ç†/åŠ è½½å™¨æ¨¡æ¿
â”‚   â””â”€â”€ build.js           #    æ„å»ºå‘å¸ƒè„šæœ¬
â”œâ”€â”€ dist/                  # ğŸ“¦ æ„å»ºè¾“å‡ºç›®å½• (å‘å¸ƒç”¨)
â”œâ”€â”€ init.js                # âœ¨ é¡¹ç›®åˆå§‹åŒ–è„šæœ¬
â””â”€â”€ package.json
```

## ğŸ§© å·¥ä½œåŸç†

ç”±äº TurboWarp çš„å®‰å…¨ç­–ç•¥ï¼Œç›´æ¥ä» URL åŠ è½½çš„æ‰©å±•ä¼šè¢«å¼ºåˆ¶æ”¾å…¥ Web Worker (æ²™ç®±) ä¸­ã€‚
1. **ç‰¹æƒåŠ è½½**: æˆ‘ä»¬é€šè¿‡â€œæ–‡æœ¬åŠ è½½â€æ–¹å¼æ³¨å…¥ä¸€ä¸ª **Loader (ä»£ç†æ‰©å±•)**ã€‚å› ä¸ºæ˜¯æ‰‹åŠ¨ç²˜è´´çš„ä»£ç ï¼ŒTurboWarp å…è®¸å…¶è·å¾— **éæ²™ç®±æƒé™**ã€‚
2. **å®æ—¶ç›‘å¬**: Loader è¿è¡Œåä¼šæŒç»­è½®è¯¢æœ¬åœ°æœåŠ¡å™¨ã€‚
3. **åŠ¨æ€æ³¨å…¥**: ç›‘å¬åˆ°æºç å˜æ›´åï¼ŒLoader æ‹‰å–æ–°ä»£ç ï¼Œé€šè¿‡ `eval` åœ¨å½“å‰ç‰¹æƒä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œï¼Œå¹¶åˆ©ç”¨ `refreshBlocks` API å¼ºåˆ¶åˆ·æ–°ç§¯æœ¨è§†å›¾ã€‚

## âš ï¸ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆç§¯æœ¨æ²¡æœ‰æ›´æ–°ï¼Ÿ 
A: è¯·æ£€æŸ¥ç»ˆç«¯æ˜¯å¦æŠ¥é”™ã€‚ç¡®ä¿ src/extension.js ä¸­çš„ id ä¸ package.json ä¸­çš„ extensionConfig.id ä¿æŒä¸€è‡´ã€‚

## ğŸ§· åè®°
> æ­¤é¡¹ç›®ç”±Geminiç”Ÿæˆ
åŸå› æ˜¯[fs-content](https://github.com/Rundll86/fs-context)çš„æ‰©å±•å¼€å‘è€…åœ¨å¤šæ¬¡å‚¬ä¿ƒä¸‹ä»ç„¶æ‡’å¾—åšçƒ­é‡è½½, æˆ‘å°±å€ŸåŠ©Geminiè‡ªå·±åšäº†ä¸€ä¸ª